# -*- coding: utf-8 -*-
"""
config.py ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞ ¬´–í–æ–ø—Ä–æ—Å –¥–Ω—è 2.0¬ª –¥–ª—è –†–æ–º–∞–Ω–∞.
–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render / –ª–æ–∫–∞–ª—å–Ω–æ / Docker.

–í–∞–∂–Ω–æ:
- BOT_TOKEN –±–µ—Ä—ë–º –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (Render ‚Üí Environment ‚Üí BOT_TOKEN).
- –¢–≤–æ–π –∞–¥–º–∏–Ω-ID —É–∂–µ –ø—Ä–æ—à–∏—Ç –≤ –∫–æ–¥: 252641015 (–º–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ADMIN_IDS).
"""

from __future__ import annotations
import os
from datetime import time as _time

# =========================
# –ë–ê–ó–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# =========================

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ ‚Äî –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è (–±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞)
BOT_TOKEN: str = os.getenv("BOT_TOKEN", "")

# –ê–¥–º–∏–Ω—ã
def _parse_admins(env_val: str | None) -> list[int]:
    if not env_val:
        return []
    out = []
    for part in env_val.split(","):
        p = part.strip()
        if p.isdigit():
            out.append(int(p))
    return out

# –¢–≤–æ–π ID —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
ADMINS: list[int] = [252641015]  # ‚Üê —Ç–≤–æ–π —á–∏—Å–ª–æ–≤–æ–π Telegram ID
# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è ADMIN_IDS="123,456"
_extra = _parse_admins(os.getenv("ADMIN_IDS"))
for _a in _extra:
    if _a not in ADMINS:
        ADMINS.append(_a)

# –õ–æ–≥-—á–∞—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
LOG_CHAT_ID: int | None = int(os.getenv("LOG_CHAT_ID")) if os.getenv("LOG_CHAT_ID", "").isdigit() else None

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
TZ: str = os.getenv("TZ", "Europe/Amsterdam")

# =========================
# –°–°–´–õ–ö–ò / –£–ü–û–ú–ò–ù–ê–ù–ò–Ø
# =========================

LINKS = {
    "channel": os.getenv("LINK_CHANNEL", "https://t.me/vse_otvety_vnutri_nas"),
    "reviews": os.getenv("LINK_REVIEWS", "https://t.me/+4Ov29pR6uj9iYjgy"),
    "mentor_contact": os.getenv("MENTOR_CONTACT", "@Mr_Nikto4"),
}

# =========================
# –¢–ï–ö–°–¢–´
# =========================

START_TEXT = (
    "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –∫–∞–Ω–∞–ª–∞ **¬´–í—Å–µ –æ—Ç–≤–µ—Ç—ã –≤–Ω—É—Ç—Ä–∏ –Ω–∞—Å¬ª**.\n\n"
    "–ó–¥–µ—Å—å —Ç–µ–±—è –∂–¥—ë—Ç **¬´–í–æ–ø—Ä–æ—Å –¥–Ω—è 2.0¬ª** —Å –º–∏–Ω–∏‚Äë–≤–∏–∫—Ç–æ—Ä–∏–Ω–æ–π, –≥–∞–π–¥—ã —Å –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏ –∏ –ø—É—Ç—å –∫ —Ç–≤–æ–µ–π "
    "–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–∏–ª–µ. –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ –ø–µ—Ä–≤–æ–º—É —à–∞–≥—É –∏ –≤–∫–ª—é—á–∞–π –∂–∏–∑–Ω—å –Ω–∞ 100%.\n\n"
    "–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî –µ—Å—Ç—å **–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –∏ **–Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ**.\n"
    f"–°–≤—è–∑—å —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º: {LINKS['mentor_contact']}"
)

HELP_TEXT = (
    "–ù–∞–≤–∏–≥–∞—Ü–∏—è:\n"
    "‚Ä¢ **üéØ –í–æ–ø—Ä–æ—Å –¥–Ω—è** ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –∏ —Ä–∞–∑–±–æ—Ä–æ–º.\n"
    "‚Ä¢ **üìö –ì–∞–π–¥—ã** ‚Äî –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏, —ç–Ω–µ—Ä–≥–∏–∏, –ø—Ä–∏–≤—ã—á–∫–∞–º –∏ —Ç.–¥.\n"
    "‚Ä¢ **üß≠ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** ‚Äî –º—è–≥–∫–∏–π —Å—Ç–∞—Ä—Ç, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏ —Ä–æ—Å—Ç–∞.\n"
    "‚Ä¢ **üí¨ –ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ** ‚Äî 4 –Ω–µ–¥–µ–ª–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π.\n"
    "‚Ä¢ **üìé –û—Ç–∑—ã–≤—ã** ‚Äî –∂–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.\n"
    "‚Ä¢ **üì¢ –ö–∞–Ω–∞–ª** ‚Äî –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã, –∏–Ω—Å–∞–π—Ç—ã, —Ñ–æ—Ä–º–∞—Ç ¬´—Å–µ—Ä–∏–∞–ª–∞¬ª.\n"
)

TEXT_DIAGNOSTICS = (
    "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± —É–≤–∏–¥–µ—Ç—å, –≥–¥–µ —Ç–µ—Ä—è–µ—Ç—Å—è —ç–Ω–µ—Ä–≥–∏—è –∏ –≤–Ω–∏–º–∞–Ω–∏–µ. "
    "–ü–æ –∏—Ç–æ–≥–∞–º –ø–æ–ª—É—á–∏—à—å –ø–æ–Ω—è—Ç–Ω—É—é –∫–∞—Ä—Ç—É –¥–µ–π—Å—Ç–≤–∏–π. –•–æ—á–µ—à—å ‚Äî –Ω–∞–ø–∏—à—É, –∫–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è."
)

TEXT_MENTORING = (
    "–ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ –Ω–∞ 4 –Ω–µ–¥–µ–ª–∏: —Ä–∞—Å–ø–∞–∫—É–µ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª, —É—Å–∏–ª–∏–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —É–±–µ—Ä—ë–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, "
    "–Ω–∞—Å—Ç—Ä–æ–∏–º —Ä–µ–∂–∏–º –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏. –î–≤–∏–≥–∞–µ–º—Å—è —à–∞–≥ –∑–∞ —à–∞–≥–æ–º ‚Äî –≤ —Ç–≤–æ—ë–º —Ç–µ–º–ø–µ."
)

TEXT_GUIDES = (
    "–ü–æ–¥–±–æ—Ä–∫–∞ –≥–∞–π–¥–æ–≤. –í—ã–±–∏—Ä–∞–π —Ç–æ, —á—Ç–æ —Å–µ–π—á–∞—Å –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ. "
    "–•–æ—á–µ—à—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –ø–æ–¥ —Ç–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é ‚Äî –Ω–∞–ø–∏—à–∏ –∫—Ä–∞—Ç–∫–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç."
)

TEXT_QUESTION_OF_DAY_INTRO = (
    "–ì–æ—Ç–æ–≤? **–í–æ–ø—Ä–æ—Å –¥–Ω—è 2.0** —É–∂–µ —Ç—É—Ç. –û—Ç–≤–µ—á–∞–π –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ, –∞ –ø–æ—Ç–æ–º ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π —Ä–∞–∑–±–æ—Ä."
)

TEXT_AFTER_ANSWER_RIGHT = "‚úì –í–µ—Ä–Ω–æ! –ö–ª–∞—Å—Å–Ω—ã–π –≤—ã–±–æ—Ä. –†–∞–∑–±–æ—Ä –Ω–∏–∂–µ üëá"
TEXT_AFTER_ANSWER_WRONG = "–•–æ—Ä–æ—à–∞—è –ø–æ–ø—ã—Ç–∫–∞. –°–º–æ—Ç—Ä–∏ —Ä–∞–∑–±–æ—Ä –∏ –∑–∞–±–∏—Ä–∞–π –ø–æ–ª—å–∑—É üëá"

TEXT_EXPLANATION_FOOTER = (
    "–•–æ—á–µ—à—å –≥–ª—É–±–∂–µ –ø—Ä–æ–π—Ç–∏ —Ç–µ–º—É ‚Äî –æ—Ç–∫—Ä–æ–π –≥–∞–π–¥ –∏–ª–∏ —Å–ø—Ä–æ—Å–∏ –ø—Ä–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É."
)

# =========================
# –ö–ù–û–ü–ö–ò
# =========================

BUTTONS = {
    "main_menu": [
        "üéØ –í–æ–ø—Ä–æ—Å –¥–Ω—è",
        "üìö –ì–∞–π–¥—ã",
        "üß≠ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞",
        "üí¨ –ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ",
        "üìé –û—Ç–∑—ã–≤—ã",
        "üì¢ –ö–∞–Ω–∞–ª",
        "‚ùî –ü–æ–º–æ—â—å",
    ],
    "back": "‚óÄÔ∏è –ù–∞–∑–∞–¥",
    "next": "–î–∞–ª—å—à–µ ‚Üí",
    "get_question": "–ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å",
    "show_guides": "–û—Ç–∫—Ä—ã—Ç—å –≥–∞–π–¥—ã",
    "contact_mentor": "–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º",
    "open_reviews": "–°–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã",
    "open_channel": "–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–Ω–∞–ª",
    "take_diagnostic": "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É",
}

# =========================
# –ì–ê–ô–î–´ (–ø—Ä–∏–º–µ—Ä—ã)
# =========================

GUIDES = [
    {
        "slug": "awareness_daily",
        "title": "–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å",
        "description": "5 –º–∏–Ω—É—Ç —É—Ç—Ä–æ–º –∏ –≤–µ—á–µ—Ä–æ–º: –≤–Ω–∏–º–∞–Ω–∏–µ, –¥—ã—Ö–∞–Ω–∏–µ, –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ.",
        "file_id": None,
        "steps": [
            "1 –º–∏–Ω ‚Äî –¥—ã—Ö–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–æ—Å, —Å—á—ë—Ç 4‚Äì4‚Äì4",
            "3 –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –¥–µ–Ω—å: —Ç–µ–ª–æ, –º—ã—Å–ª—å, –¥–µ–π—Å—Ç–≤–∏–µ",
            "–í–µ—á–µ—Ä–æ–º ‚Äî 1 –∏–Ω—Å–∞–π—Ç –∏ 1 –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å",
        ],
        "stickers": ["‚Üí", "üìç", "üî∏"],
    },
    {
        "slug": "energy_reset",
        "title": "Reset —ç–Ω–µ—Ä–≥–∏–∏ –∑–∞ 7 –º–∏–Ω—É—Ç",
        "description": "–ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫: —Ç–µ–ª–æ, –≤–æ–¥–∞, –¥–≤–∏–∂–µ–Ω–∏–µ, —Ñ–æ–∫—É—Å.",
        "file_id": None,
        "steps": [
            "–°—Ç–∞–∫–∞–Ω –≤–æ–¥—ã",
            "60‚Äì90 —Å–µ–∫ ‚Äî –≤—Å—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ —Ç–µ–ª–∞",
            "–§–æ–∫—É—Å‚Äë–≤–æ–ø—Ä–æ—Å: ¬´–ß—Ç–æ —Å–µ–π—á–∞—Å –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ?¬ª",
        ],
        "stickers": ["‚Üí", "üìå"],
    },
    {
        "slug": "habit_21",
        "title": "–ü—Ä–∏–≤—ã—á–∫–∞ –∑–∞ 21 –¥–µ–Ω—å",
        "description": "–ú—è–≥–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–≤—ã—á–∫–∏ –±–µ–∑ –≤—ã–≥–æ—Ä–∞–Ω–∏—è.",
        "file_id": None,
        "steps": [
            "–í—ã–±–µ—Ä–∏ –æ–¥–Ω—É –º–∏–Ω–∏‚Äë–ø—Ä–∏–≤—ã—á–∫—É",
            "–ü—Ä–∏–≤—è–∂–∏ –∫ —Ç—Ä–∏–≥–≥–µ—Ä—É (–ø–æ—Å–ª–µ –∫–æ—Ñ–µ/–¥—É—à–∞/—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏)",
            "–û—Ç–º–µ—á–∞–π 21 –¥–µ–Ω—å, –±–æ–Ω—É—Å ‚Äî –¥–µ–Ω—å 22 –∫–∞–∫ —Ä–µ–≤–∏–∑–∏—è",
        ],
        "stickers": ["‚úì", "‚Üí"],
    },
]

# =========================
# –í–û–ü–†–û–° –î–ù–Ø 2.0
# =========================

QUESTIONS = [
    {
        "id": "q_awareness_vs_noise",
        "text": "–ß—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–±—è –≤ —Ä–µ—Å—É—Ä—Å –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è?",
        "options": [
            "1 –º–∏–Ω –¥—ã—Ö–∞–Ω–∏—è –∏ –ø–∞—É–∑–∞",
            "–°–º–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≤ —Ç–µ–º–ø–µ",
            "–°–æ–æ–±—â–µ–Ω–∏—è –∏ –ª–µ–Ω—Ç–∞ ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –º—ã—Å–ª—è–º–∏",
        ],
        "correct": 0,
        "explain": (
            "–ö–æ—Ä–æ—Ç–∫–∞—è –ø–∞—É–∑–∞ + –¥—ã—Ö–∞–Ω–∏–µ ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –∏ —è—Å–Ω–æ—Å—Ç—å. "
            "–°–º–µ–Ω–∞ –∑–∞–¥–∞—á –¥–∞—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç, –Ω–æ —á–∞—Å—Ç–æ —Ä–∞–∑–º–µ–Ω–∏–≤–∞–µ—Ç —Ñ–æ–∫—É—Å. –õ–µ–Ω—Ç–∞ —É–≤–æ–¥–∏—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∏ —Å—ä–µ–¥–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é."
        ),
        "image_file_id": None,
    },
    {
        "id": "q_energy_morning",
        "text": "–£—Ç—Ä–æ–º —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–¥–Ω—è—Ç—å —ç–Ω–µ—Ä–≥–∏—é. –ß—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–µ–µ –≤—Å–µ–≥–æ?",
        "options": [
            "–°—Ç–∞–∫–∞–Ω –≤–æ–¥—ã + 2 –º–∏–Ω—É—Ç—ã –¥–≤–∏–∂–µ–Ω–∏—è",
            "–ï—â—ë 15 –º–∏–Ω—É—Ç –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ",
            "–°—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏",
        ],
        "correct": 0,
        "explain": (
            "–í–æ–¥–∞ + –¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–±—É–∂–¥–∞—é—Ç —Ç–µ–ª–æ –∏ –º–æ–∑–≥. –¢–µ–ª–µ—Ñ–æ–Ω –∏ –ø–µ—Ä–µ—á–µ–Ω—å –∑–∞–¥–∞—á —á–∞—Å—Ç–æ —Å–æ–∑–¥–∞—é—Ç —à—É–º, "
            "–∞ —Ç–µ–ª–æ –æ—Å—Ç–∞—ë—Ç—Å—è —Å–æ–Ω–Ω—ã–º ‚Äî —Ñ–æ–∫—É—Å —Å–Ω–∏–∂–∞–µ—Ç—Å—è."
        ),
        "image_file_id": None,
    },
    {
        "id": "q_habit_mini",
        "text": "–ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–∫—Ä–µ–ø–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É –∑–∞ 21 –¥–µ–Ω—å?",
        "options": [
            "–û–¥–Ω–∞ –º–∏–Ω–∏‚Äë–ø—Ä–∏–≤—ã—á–∫–∞ + –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Ç—Ä–∏–≥–≥–µ—Ä—É",
            "–°—Ä–∞–∑—É 5 –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –∂—ë—Å—Ç–∫–∏–π —Ä–µ–∂–∏–º",
            "–¢–æ–ª—å–∫–æ –º–æ—Ç–∏–≤–∞—Ü–∏—è –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ",
        ],
        "correct": 0,
        "explain": (
            "–ú–∏–Ω–∏‚Äë–ø—Ä–∏–≤—ã—á–∫–∞, –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω–∞—è –∫ —É—Å—Ç–æ–π—á–∏–≤–æ–º—É —Ç—Ä–∏–≥–≥–µ—Ä—É (–¥—É—à, –∫–æ—Ñ–µ, –ø—Ä–æ–≥—É–ª–∫–∞), "
            "—Å–æ–∑–¥–∞—ë—Ç –ª—ë–≥–∫–∏–π –≤—Ö–æ–¥ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å. –ü–∞–∫–µ—Ç –∏–∑ 5 –ø—Ä–∏–≤—ã—á–µ–∫ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç, "
            "–∞ –º–æ—Ç–∏–≤–∞—Ü–∏—è –±–µ–∑ —Å–∏—Å—Ç–µ–º—ã –±—ã—Å—Ç—Ä–æ –≥–∞—Å–Ω–µ—Ç."
        ),
        "image_file_id": None,
    },
]

QUESTION_OF_DAY_HEADER = "–°–µ–≥–æ–¥–Ω—è—à–Ω–∏–π —Ñ–æ–∫—É—Å‚Äë–≤–æ–ø—Ä–æ—Å:"

# =========================
# –†–û–¢–ê–¶–ò–Ø –ò –†–ê–°–ü–ò–°–ê–ù–ò–ï
# =========================

AUTO_ROTATE_QUESTION: bool = True
QUESTION_PUSH_TIME: _time = _time(
    hour=int(os.getenv("PUSH_HOUR", "9")),
    minute=int(os.getenv("PUSH_MIN", "0")),
    second=0
)
ALLOW_RETRY_SAME_DAY: bool = bool(int(os.getenv("ALLOW_RETRY_SAME_DAY", "0")))

# =========================
# –•–†–ê–ù–ò–õ–ò–©–ï / –§–ê–ô–õ–´
# =========================

DATA_DIR = os.getenv("DATA_DIR", "data")
DB_PATH = os.path.join(DATA_DIR, "bot.sqlite3")
USER_STATE_PATH = os.path.join(DATA_DIR, "user_state.json")

# =========================
# –°–¢–ê–¢–ò–°–¢–ò–ö–ê / –ê–ù–ê–õ–ò–¢–ò–ö–ê
# =========================

STATS = {
    "collect_answers": True,
    "collect_guide_clicks": True,
    "send_daily_report": False,
}

REPORT_TEMPLATES = {
    "daily_header": "–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç –±–æ—Ç–∞",
    "answers_line": "–û—Ç–≤–µ—Ç–æ–≤ –Ω–∞ ¬´–í–æ–ø—Ä–æ—Å –¥–Ω—è¬ª: {count}",
    "guides_line": "–û—Ç–∫—Ä—ã—Ç–∏–π –≥–∞–π–¥–æ–≤: {count}",
}

# =========================
# –ü–†–ï–î–û–ü–†–ï–î–ï–õ–Å–ù–ù–´–ï –ö–ù–û–ü–ö–ò‚Äë–°–°–´–õ–ö–ò
# =========================

INLINE_LINKS = {
    "reviews": {"title": "üìé –û—Ç–∑—ã–≤—ã", "url": LINKS["reviews"]},
    "channel": {"title": "üì¢ –ö–∞–Ω–∞–ª", "url": LINKS["channel"]},
    "mentor": {"title": "–ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫—É", "url": f"https://t.me/{LINKS['mentor_contact'].lstrip('@')}"},
}

# =========================
# –ê–ù–¢–ò‚Äë–§–õ–£–î / –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï
# =========================

FLOOD = {"answer_cooldown_sec": 2}
DEBUG: bool = bool(int(os.getenv("DEBUG", "0")))

def get_question_for_day(day_index: int) -> dict:
    if not QUESTIONS:
        raise RuntimeError("–°–ø–∏—Å–æ–∫ QUESTIONS –ø—É—Å—Ç ‚Äî –¥–æ–±–∞–≤—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å.")
    return QUESTIONS[day_index % len(QUESTIONS)]

def safe_get_guide(slug: str) -> dict | None:
    for g in GUIDES:
        if g["slug"] == slug:
            return g
    return None